{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf%}

{% block page_content%}
<div class="page-header">
    <h1>Hello, 
        {% if current_user.is_authenticated %}
            {{current_user.username}}
            <p>Pleased to meet you!</p>
        {% else %} 
            Stranger 
        {%endif%}
    </h1>
</div>

<div>
    {% if current_user.can(Permission.WRITE) %}
        {{wtf.quick_form(form)}}
    {% endif %}
    <h1>Posts</h1>
    <ul class = "posts">
        {% for post in posts %}
        <li class = "post">
            <div class="profile-thumbnail">
                <a href = "{{url_for('main.user', username = post.author.username) }}">
                    <img class="img-rounded profile-thumbnail"
                         src = "{{post.author.gravatar(size=40)}}">
                </a>
            </div>
            <div class ="post-date">{{ moment(post.timestamp).fromNow() }}</div>
            <div class="post-author">
                <a href = "{{url_for('main.user', username = post.author.username) }}">
                   {{ post.author.username }}
                </a>
            </div>
            <div class = "post-body">{{ post.body }}</div>
        </li>
        {% endfor %}
    <ul>
    
</div>
<p> The local time is {{moment(current_time).format("LLL")}}</p>


{%endblock%}

<!-- Some notes:
    1. "LLL" refers to the time zone and locale settings of the server, number
        of L determines the verbosity-->